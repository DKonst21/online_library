# Скачиваем книги из онлайн библиотеки.

Данный репозиторий, представляет собой скрипт для сбора информации о книгах с сайта [tululu.org](tululu.org) такой, как: название, автор, картинка с обложкой (если таковая имеется), комментарии
и текст книги.

Т.к. каждая страница книги имеет свой уникальный id, скрипт предусматривает возможность задать критерии сбора информации, а конкретно,
возможность указать границы интервала страниц для сбора информации и скачивания книг.

### Запуск
- Скачайте архив с кодом ([ссылка для скачивания](https://github.com/DKonst21/online_library)) и распакуйте его.
- Установите необходимые библиотеки
```
python -m pip install -r requirements.txt
```

### Аргументы main.py

- Запустите сайт командой:
```
python main.py
```
По умолчанию скрипт скачает книги с id-номерами с первого по десятый. Для изменения стандартного поведения скрипта нужно запустить команду вида:
```
 python main.py -start 20 -end 30
```
где 20 и 30 - начальное и конечное значение диапозона id-номеров скачиваемых книг.

Пример запуска:
```commandline
python main.py 20 30 --dest_folder dwnlds
Заголовок: 20. Черный PR. Защита и нападение в бизнесе и не только
                    Жанры: ['Деловая литература']
Заголовок: 21. Чичваркин Егений. Если из 100 раз тебя посылают 99
                    Жанры: ['Биографии и мемуары', 'Деловая литература']
Заголовок: 24. Дорога в будущее
                    Жанры: ['Маркетинг - PR - Реклама', 'О бизнесе популярно']
```

### Аргументы parse_tululu_category.py
Для запуска достаточно ввести:
```
python parse_tululu_category.py
```
В данном случае соберется информация со всех 701-й страницы из категории "фантастика", для изменения интервала, достаточно указать его значения после команды запуска
```
python parse_tululu_category.py --start_page 650 --end_page 683
```
Описание дополнительных (опциональных) настроек:

`--start_page` - стартовый номер интервала страниц, для сбора информации и скачивания книг/обложек книг.

`--end_page` - финальный номер интервала страниц, для сбора информации и скачивания книг/обложек книг.

`-skip_txt` - Не будут загружаться тексты книг (по умолчанию будет сохранено в папке `books`).

`-skip_imgs` - Не будут загружаться обложки книг (по умолчанию будет сохранено в папке `images`).

`--dest_folder` - Можно указать путь для сохранения книг/обложек книг/информации о книгах в формате `*.json`.
По умолчанию всё будет сохранено в директорию, рядом с исполняемым файлом.

`--json_path` - Параметр принимает на вход путь до *.json файла с описанием книг/обложек книг/информации о книгах.


Пример запуска:
```commandline
python main.py  --start_page 700 --end_page 701 -skip_txt -skip_imgs --dest_folder Dwnlds --json_path Dwnlds
INFO:root:Сбор ссылок на книги со страниц по жанрам
100%|█████████████████████████████████████████████████████████████████| 1/1 [00:00<00:00,  3.16it/s]
INFO:root:Сбор информации с указанных страниц / скачивание книг / обложек
100%|███████████████████████████████████████████████████████████████| 25/25 [00:10<00:00,  2.24it/s]
INFO:root:Сохраняю, данные в JSON файл...
INFO:root:Готово...
```
### render_website.py
Для запуска достаточно ввести:
```
python render_website.py --json_folder my_folder --json_file my_json_file.json
```
`--json_folder` - необязательный параметр, принимает название директории расположения *.json файла с собранными данными 
о книгах

`--json_file` - необязательный параметр, принимает название файла с данными по книгам

Этот скрипт создаёт в директории `pages` нужное количество страниц со всеми скачанными книгами находящимися в директории `books`

После запуска сервера, библиотека будет доступна по адресу: [http://127.0.0.1:5500/](http://127.0.0.1:5500/)